{
  acme_ca https://anchor.dev/acme
  acme_eab {
    key_id {$ACME_EAB_KEY_ID}
    mac_key {$ACME_EAB_MAC_KEY}
  }
}

{$BASE_DOMAIN} {
	reverse_proxy heimdall:80 {
		header_up Host localhost
		header_up Origin localhost
		header_up Referer localhost
	}
}

# Declare the wildcard domain so TLS uses it
*.{$BASE_DOMAIN} {
}

plex.{$BASE_DOMAIN} {
	reverse_proxy plex:32400 {
		header_up Host localhost
		header_up Origin localhost
		header_up Referer localhost
	}
}

sonarr.{$BASE_DOMAIN} {
	reverse_proxy sonarr:8989 {
		header_up Host localhost
		header_up Origin localhost
		header_up Referer localhost
	}
}

radarr.{$BASE_DOMAIN} {
	reverse_proxy radarr:7878 {
		header_up Host localhost
		header_up Origin localhost
		header_up Referer localhost
	}
}

qbittorrent.{$BASE_DOMAIN} {
	reverse_proxy qbittorrent:8080 {
		header_up Host localhost
		header_up Origin localhost
		header_up Referer localhost
	}
}

prowlarr.{$BASE_DOMAIN} {
	reverse_proxy prowlarr:9696 {
		header_up Host localhost
		header_up Origin localhost
		header_up Referer localhost
	}
}

jackett.{$BASE_DOMAIN} {
	reverse_proxy jackett:9117 {
		header_up Host localhost
		header_up Origin localhost
		header_up Referer localhost
	}
}
